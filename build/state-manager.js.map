{
  "version": 3,
  "file": "state-manager.js",
  "sourceRoot": "../src/",
  "sources": [
    "state-manager.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "easing = require './easing'\r\n\r\nmodule.exports = (animationManager, objects) ->\r\n  transitioning = false\r\n  nextTransition = null\r\n  currentRods = 8\r\n  positions = {}\r\n  \r\n  init: ->\r\n    positions.rod = objects.rods[1].rod.position.y\r\n    positions.nut1 = objects.rods[1].nut1.position.y\r\n    positions.nut2 = objects.rods[1].nut2.position.y\r\n    positions.nut3 = objects.rods[1].nut3.position.z\r\n    positions.nubble = objects.rods[1].nubble.position.z\r\n  transitionTo: (noRods) ->\r\n    noRods = +noRods\r\n    if transitioning\r\n      nextTransition = noRods\r\n      return\r\n    removeRod = (rodNo, delay) ->\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.rod.position'\r\n        property: 'y'\r\n        endValue: 50\r\n        duration: 0.5\r\n        delay: delay\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.rod.position'\r\n        property: 'y'\r\n        endValue: 5000\r\n        duration: 0.1\r\n        delay: delay + 0.5\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut1.rotation'\r\n        property: 'y'\r\n        endValue: 5\r\n        duration: 1.0\r\n        delay: 0\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut1.position'\r\n        property: 'y'\r\n        endValue: 50\r\n        duration: 0.5\r\n        delay: delay + 0.2\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut1.position'\r\n        property: 'y'\r\n        endValue: 5000\r\n        duration: 0.1\r\n        delay: delay + 0.7\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut2.rotation'\r\n        property: 'y'\r\n        endValue: 5\r\n        duration: 1.0\r\n        delay: 0\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut2.position'\r\n        property: 'y'\r\n        endValue: 50\r\n        duration: 0.5\r\n        delay: delay + 0.3\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut2.position'\r\n        property: 'y'\r\n        endValue: 5000\r\n        duration: 0.1\r\n        delay: delay + 0.8\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut3.rotation'\r\n        property: 'y'\r\n        endValue: 5\r\n        duration: 1.0\r\n        delay: 0\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut3.position'\r\n        property: 'z'\r\n        endValue: -50\r\n        duration: 0.5\r\n        delay: delay + 0.3\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut3.position'\r\n        property: 'z'\r\n        endValue: -5000\r\n        duration: 0.1\r\n        delay: delay + 0.8\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nubble.position'\r\n        property: 'z'\r\n        endValue: -5000\r\n        duration: 0.1\r\n        delay: delay\r\n        easing: easing.linear\r\n    insertRod = (rodNo, delay) ->\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.rod.position'\r\n        property: 'y'\r\n        endValue: 50\r\n        duration: 0.1\r\n        delay: delay\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.rod.position'\r\n        property: 'y'\r\n        endValue: positions.rod\r\n        duration: 0.5\r\n        delay: delay + 0.1\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut1.rotation'\r\n        property: 'y'\r\n        endValue: Math.random() * Math.PI\r\n        duration: 1.0\r\n        delay: delay\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut1.position'\r\n        property: 'y'\r\n        endValue: 50\r\n        duration: 0.1\r\n        delay: delay + 0.2\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut1.position'\r\n        property: 'y'\r\n        endValue: positions.nut1\r\n        duration: 0.5\r\n        delay: delay + 0.3\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut2.rotation'\r\n        property: 'y'\r\n        endValue: Math.random() * Math.PI\r\n        duration: 1.0\r\n        delay: delay\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut2.position'\r\n        property: 'y'\r\n        endValue: 50\r\n        duration: 0.1\r\n        delay: delay + 0.3\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut2.position'\r\n        property: 'y'\r\n        endValue: positions.nut2\r\n        duration: 0.5\r\n        delay: delay + 0.4\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut3.rotation'\r\n        property: 'y'\r\n        endValue: Math.random() * Math.PI\r\n        duration: 1.0\r\n        delay: delay\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut3.position'\r\n        property: 'z'\r\n        endValue: -50\r\n        duration: 0.1\r\n        delay: delay\r\n        easing: easing.linear\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nut3.position'\r\n        property: 'z'\r\n        endValue: positions.nut3\r\n        duration: 0.5\r\n        delay: delay + 0.1\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'rods.' + rodNo + '.nubble.position'\r\n        property: 'z'\r\n        endValue: positions.nubble\r\n        duration: 0.1\r\n        delay: delay + 0.5\r\n        easing: easing.linear\r\n    moveCone = (x, duration, delay) ->\r\n      lastRod = 'rods.' + (objects.rods.length - 1)\r\n      nutOffset = objects.rods[objects.rods.length - 1].nut1.position.x - objects.cone3.position.x\r\n      rodOffset = objects.rods[objects.rods.length - 1].rod.position.x - objects.cone3.position.x\r\n      ['cone3', 'cone4', 'bignut2'].forEach (item) ->\r\n        animationManager.addToQueue\r\n          object: item + '.position'\r\n          property: 'x'\r\n          endValue: x\r\n          duration: duration\r\n          delay: delay\r\n          easing: easing.easeInOutCubic\r\n      [lastRod + '.nut1', lastRod + '.nut2', lastRod + '.nut3'].forEach (item) ->\r\n        animationManager.addToQueue\r\n          object: item + '.position'\r\n          property: 'x'\r\n          endValue: x + nutOffset\r\n          duration: duration\r\n          delay: delay\r\n          easing: easing.easeInOutCubic\r\n      [lastRod + '.rod', lastRod + '.nubble'].forEach (item) ->\r\n        animationManager.addToQueue\r\n          object: item + '.position'\r\n          property: 'x'\r\n          endValue: x + rodOffset\r\n          duration: duration\r\n          delay: delay\r\n          easing: easing.easeInOutCubic\r\n    morph = (val, duration, delay) ->\r\n      animationManager.addToQueue\r\n        object: 'base.morphTargetInfluences'\r\n        property: 0\r\n        endValue: val\r\n        duration: duration\r\n        delay: delay\r\n        easing: easing.easeInOutCubic\r\n      animationManager.addToQueue\r\n        object: 'plate.morphTargetInfluences'\r\n        property: 0\r\n        endValue: val\r\n        duration: duration\r\n        delay: delay\r\n        easing: easing.easeInOutCubic\r\n    moveCamera = (x, duration, delay) ->\r\n      animationManager.addToQueue\r\n        object: 'controls.target'\r\n        property: 'x'\r\n        endValue: x\r\n        duration: duration\r\n        delay: delay\r\n        easing: easing.easeInOutCubic\r\n    if noRods < currentRods\r\n      delay = 0\r\n      while currentRods isnt noRods\r\n        removeRod currentRods - 2, delay\r\n        delay += 0.1\r\n        currentRods -= 1\r\n      moveCone 5 * (currentRods - 1), 1, 0\r\n      totalRods = objects.rods.length - 2\r\n      morph (totalRods - (currentRods - 2)) / totalRods, 1, 0\r\n    else\r\n      delay = 0\r\n      while currentRods isnt noRods\r\n        insertRod currentRods - 1, delay\r\n        delay += 0.1\r\n        currentRods += 1\r\n      moveCone 5 * (currentRods - 1), 1, 0\r\n      totalRods = objects.rods.length - 2\r\n      morph (totalRods - (currentRods - 2)) / totalRods, 1, 0\r\n    moveCamera (currentRods - 8) * 5 / 3, 1, 0\r\n      \r\n    return\r\n    "
  ]
}